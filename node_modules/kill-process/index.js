var psTree = require('ps-tree')

module.exports = function (parentId) { // because of exec id points to sh not node
  return new Promise(function (resolve) {
    psTree(parentId, function (err, children) {
      if (err) return reject(err)
      children.forEach((item) => {
        process.kill(item.PID)
      })
      process.kill(parentId)
      resolve()
    })
  })
}
